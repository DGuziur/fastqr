<div class="settings-container">
  <mat-tab-group class="settings-tab-group">
    <mat-tab label="Colors">
      <div class="settings-tab">
        @if (qrDataService.qrDotsGradient()) {
        <gradient-input
          title="Dots"
          (valueChanged)="handleDotsGradient($event)"
          [(selectedGradientType)]="qrDataService.qrDotsGradientType"
          [(rotation)]="qrDataService.qrDotsGradientRotation"
        ></gradient-input>
        } @else {
        <color-input
          label="Main"
          [defaultColor]="qrDataService.qrColor()"
          (colorChanged)="handleColorChange($event)"
        ></color-input>
        }

        <mat-divider></mat-divider>
        @if (qrDataService.qrBackgroundGradient()) {
        <gradient-input
          title="Dots"
          (valueChanged)="handleBackgroundGradient($event)"
          [(selectedGradientType)]="qrDataService.qrBackgroundGradientType"
          [(rotation)]="qrDataService.qrBackgroundGradientRotation"
        ></gradient-input>
        } @else {
        <color-input
          label="Background"
          [defaultColor]="qrDataService.qrBackground()"
          (colorChanged)="handleBackgroundChange($event)"
        >
          <button mat-icon-button (click)="toggleTransparent()">
            <mat-icon>{{
              qrDataService.qrTransparent() ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>
        </color-input>
        }
        <mat-divider></mat-divider>
        @if (qrDataService.qrCornerSquareGradient()) {
        <gradient-input
          title="Squares"
          (valueChanged)="handleCornerSquareGradient($event)"
          [(selectedGradientType)]="qrDataService.qrCornerSquareGradientType"
          [(rotation)]="qrDataService.qrCornerSquareGradientRotation"
        ></gradient-input>
        }@else {
        <color-input
          label="Squares"
          [defaultColor]="qrDataService.qrCornerSquare()"
          (colorChanged)="handleCornerSquareChange($event)"
        ></color-input>
        }
        <mat-divider></mat-divider>
        <color-input
          label="Square dots"
          [defaultColor]="qrDataService.qrCornerDot()"
          (colorChanged)="handleCornerDotChange($event)"
        ></color-input>
        <mat-divider></mat-divider>
      </div>
    </mat-tab>
    <mat-tab label="Style">
      <div class="flex-aroud">
        <span>Padding</span>
        <mat-slider min="0" max="20" step="1">
          <input
            matSliderThumb
            [value]="qrDataService.qrMargin()"
            (valueChange)="qrDataService.qrMargin.set($event)"
          />
        </mat-slider>
      </div>
      <mat-divider></mat-divider>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> Dot type </mat-panel-title>
          <mat-panel-description>
            Currently selected: {{ qrDataService.qrDotsType() }}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <mat-button-toggle-group
          class="multiple-choice"
          name="dotType"
          [value]="qrDataService.qrDotsType()"
          aria-label="Dot type"
          (valueChange)="qrDataService.qrDotsType.set($event)"
        >
          <mat-button-toggle value="square">Square</mat-button-toggle>
          <mat-button-toggle value="dots">Dots</mat-button-toggle>
          <mat-button-toggle value="classy">Classy</mat-button-toggle>
          <mat-button-toggle value="rounded">Rounded</mat-button-toggle>
          <mat-button-toggle value="classy-rounded"
            >Classy rounded</mat-button-toggle
          >
          <mat-button-toggle value="extra-rounded"
            >Extra rounded</mat-button-toggle
          >
        </mat-button-toggle-group>
      </mat-expansion-panel>
      <mat-divider></mat-divider>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> Corner square type </mat-panel-title>
          <mat-panel-description>
            Currently selected: {{ qrDataService.qrSquareType() }}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <mat-button-toggle-group
          name="dotType"
          [value]="qrDataService.qrSquareType()"
          aria-label="Dot type"
          (valueChange)="qrDataService.qrSquareType.set($event)"
        >
          <mat-button-toggle value="dot">Dot</mat-button-toggle>
          <mat-button-toggle value="square">Square</mat-button-toggle>
          <mat-button-toggle value="extra-rounded"
            >Extra rounded</mat-button-toggle
          >
        </mat-button-toggle-group>
      </mat-expansion-panel>
      <mat-divider></mat-divider>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Corner dot type</mat-panel-title>
          <mat-panel-description>
            Currently selected: {{ qrDataService.qrCornerDotType() }}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <mat-button-toggle-group
          name="dotType"
          [value]="qrDataService.qrCornerDotType()"
          aria-label="Dot type"
          (valueChange)="qrDataService.qrCornerDotType.set($event)"
        >
          <mat-button-toggle value="dot">Dot</mat-button-toggle>
          <mat-button-toggle value="square">Square</mat-button-toggle>
        </mat-button-toggle-group>
      </mat-expansion-panel>
    </mat-tab>
    <mat-tab label="Logo">
      <div class="flex-aroud">
        <span>Upload</span>
        @if (qrDataService.qrIconName() || qrDataService.qrIcon()) {
        <button class="file-upload-btn" mat-flat-button (click)="resetIcon()">
          {{ qrDataService.qrIconName() }}
          <mat-icon>delete</mat-icon>
        </button>
        } @else {
        <button
          class="file-upload-btn"
          mat-flat-button
          (click)="fileInput.click()"
        >
          {{ "Img" }}
          <mat-icon>upload</mat-icon>
        </button>
        }
        <input #fileInput type="file" (change)="addImage($event)" />
      </div>
      <mat-divider></mat-divider>
      <div class="flex-aroud">
        <span>Size</span>
        <mat-slider min="0.05" max="1" step="0.05">
          <input
            matSliderThumb
            [value]="qrDataService.qrIconSize()"
            (valueChange)="qrDataService.qrIconSize.set($event)"
          />
        </mat-slider>
      </div>
      <mat-divider></mat-divider>
      <div class="icon-margin-options">
        <span>Padding</span>
        <button
          mat-icon-button
          (click)="
            qrDataService.qrIconHideBackgroundDots.set(
              !qrDataService.qrIconHideBackgroundDots()
            )
          "
        >
          <mat-icon>{{
            qrDataService.qrIconHideBackgroundDots()
              ? "visibility"
              : "visibility_off"
          }}</mat-icon>
        </button>
        @if (qrDataService.qrIconHideBackgroundDots()) {
        <mat-slider class="slider" min="1" max="10" step="0.5">
          <input
            matSliderThumb
            [value]="qrDataService.qrIconMargin()"
            (valueChange)="qrDataService.qrIconMargin.set($event)"
          />
        </mat-slider>
        } @else {
        <mat-slider class="slider" min="1" max="10" step="1">
          <input
            disabled
            matSliderThumb
            [value]="qrDataService.qrIconMargin()"
            (valueChange)="qrDataService.qrIconMargin.set($event)"
          />
        </mat-slider>
        }
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
